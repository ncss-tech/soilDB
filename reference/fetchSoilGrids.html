<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Get SoilGrids 2.0 Property Estimates for Points or Spatial Extent — fetchSoilGrids • soilDB</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Get SoilGrids 2.0 Property Estimates for Points or Spatial Extent — fetchSoilGrids"><meta name="description" content="This function obtains SoilGrids 2.0 properties
information (250m raster resolution) given a data.frame containing
site IDs, latitudes and longitudes, or a spatial extent (see grid=TRUE
argument).
SoilGrids API and maps return values as whole (integer) numbers to minimize
the storage space used. These values have conversion factors applied by
fetchSoilGrids() to produce conventional units shown in the table below
(see Details)."><meta property="og:description" content="This function obtains SoilGrids 2.0 properties
information (250m raster resolution) given a data.frame containing
site IDs, latitudes and longitudes, or a spatial extent (see grid=TRUE
argument).
SoilGrids API and maps return values as whole (integer) numbers to minimize
the storage space used. These values have conversion factors applied by
fetchSoilGrids() to produce conventional units shown in the table below
(see Details)."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">soilDB</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.8.14</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/dominant-es.html">Mapping Dominant Ecological Sites using SSURGO Data</a></li>
    <li><a class="dropdown-item" href="../articles/fetchNASIS.html">fetchNASIS(from='pedons') Columns</a></li>
    <li><a class="dropdown-item" href="../articles/local-ssurgo.html">Local Soil Survey Geographic (SSURGO) Databases</a></li>
    <li><a class="dropdown-item" href="../articles/wcs-ssurgo.html">Map Unit Key Grids and Thematic Maps of Soil Survey Geographic (SSURGO) Data</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ncss-tech/soilDB/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Get SoilGrids 2.0 Property Estimates for Points or Spatial Extent</h1>
      <small class="dont-index">Source: <a href="https://github.com/ncss-tech/soilDB/blob/master/R/fetchSoilGrids.R" class="external-link"><code>R/fetchSoilGrids.R</code></a></small>
      <div class="d-none name"><code>fetchSoilGrids.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function obtains <a href="https://soilgrids.org" class="external-link">SoilGrids 2.0</a> properties
information (250m raster resolution) given a <code>data.frame</code> containing
site IDs, latitudes and longitudes, or a spatial extent (see <code>grid=TRUE</code>
argument).</p>
<p>SoilGrids API and maps return values as whole (integer) numbers to minimize
the storage space used. These values have conversion factors applied by
<code>fetchSoilGrids()</code> to produce conventional units shown in the table below
(see Details).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">fetchSoilGrids</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  loc.names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"id"</span>, <span class="st">"lat"</span>, <span class="st">"lon"</span><span class="op">)</span>,</span>
<span>  depth_intervals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"0-5"</span>, <span class="st">"5-15"</span>, <span class="st">"15-30"</span>, <span class="st">"30-60"</span>, <span class="st">"60-100"</span>, <span class="st">"100-200"</span><span class="op">)</span>,</span>
<span>  variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bdod"</span>, <span class="st">"cec"</span>, <span class="st">"cfvo"</span>, <span class="st">"clay"</span>, <span class="st">"nitrogen"</span>, <span class="st">"phh2o"</span>, <span class="st">"sand"</span>, <span class="st">"silt"</span>,</span>
<span>    <span class="st">"soc"</span>, <span class="st">"ocd"</span>, <span class="st">"wv0010"</span>, <span class="st">"wv0033"</span>, <span class="st">"wv1500"</span><span class="op">)</span>,</span>
<span>  grid <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  filename <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  target_resolution <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">250</span>, <span class="fl">250</span><span class="op">)</span>,</span>
<span>  summary_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Q0.05"</span>, <span class="st">"Q0.5"</span>, <span class="st">"Q0.95"</span>, <span class="st">"mean"</span><span class="op">)</span>,</span>
<span>  endpoint <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="op">!</span><span class="va">grid</span>, <span class="st">"https://rest.isric.org/soilgrids/v2.0/properties/query"</span>,</span>
<span>    <span class="st">"https://files.isric.org/soilgrids/latest/data/"</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  progress <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>A <code>data.frame</code> containing 3 columns referring to site ID, latitude
and longitude. Or a spatial (sf, terra) object for which a bounding box can
be calculated when <code>grid=TRUE</code>.</p></dd>


<dt id="arg-loc-names">loc.names<a class="anchor" aria-label="anchor" href="#arg-loc-names"></a></dt>
<dd><p>Optional: Column names referring to site ID, latitude and
longitude. Default: <code>c("id", "lat", "lon")</code></p></dd>


<dt id="arg-depth-intervals">depth_intervals<a class="anchor" aria-label="anchor" href="#arg-depth-intervals"></a></dt>
<dd><p>Default: <code>"0-5"</code>, <code>"5-15"</code>, <code>"15-30"</code>, <code>"30-60"</code>,
<code>"60-100"</code>, <code>"100-200"</code></p></dd>


<dt id="arg-variables">variables<a class="anchor" aria-label="anchor" href="#arg-variables"></a></dt>
<dd><p>Default: <code>"bdod"</code>, <code>"cec"</code>, <code>"cfvo"</code>, <code>"clay"</code>,
<code>"nitrogen"</code>, <code>"phh2o"</code>, <code>"sand"</code>, <code>"silt"</code>, <code>"soc"</code>, <code>"ocd"</code>, <code>"wv0010"</code>,
<code>"wv0033"</code>, <code>"wv1500"</code>. Optionally <code>"ocs"</code> (only for 0 to 30 cm interval).</p></dd>


<dt id="arg-grid">grid<a class="anchor" aria-label="anchor" href="#arg-grid"></a></dt>
<dd><p>Download subset of SoilGrids Cloud Optimized GeoTIFF? Default:
<code>FALSE</code></p></dd>


<dt id="arg-filename">filename<a class="anchor" aria-label="anchor" href="#arg-filename"></a></dt>
<dd><p>Only used when <code>grid=TRUE</code>. If <code>NULL</code> defaults to an
in-memory raster, or temporary file if result does not fit in memory.</p></dd>


<dt id="arg-overwrite">overwrite<a class="anchor" aria-label="anchor" href="#arg-overwrite"></a></dt>
<dd><p>Only used when <code>grid=TRUE</code>. Default: <code>FALSE</code></p></dd>


<dt id="arg-target-resolution">target_resolution<a class="anchor" aria-label="anchor" href="#arg-target-resolution"></a></dt>
<dd><p>Only used when <code>grid=TRUE</code>. Default: <code>c(250, 250)</code>
(250m x 250m pixels)</p></dd>


<dt id="arg-summary-type">summary_type<a class="anchor" aria-label="anchor" href="#arg-summary-type"></a></dt>
<dd><p>Only used when <code>grid=TRUE</code>. One or more of <code>"Q0.05"</code>,
<code>"Q0.5"</code>, <code>"Q0.95"</code>, <code>"mean"</code>; these are summary statistics that correspond
to 5th, 50th, 95th percentiles, and mean value for selected <code>variables</code>.</p></dd>


<dt id="arg-endpoint">endpoint<a class="anchor" aria-label="anchor" href="#arg-endpoint"></a></dt>
<dd><p>Optional: custom API endpoint. Default:
<code>"https://rest.isric.org/soilgrids/v2.0/properties/query"</code> when
<code>grid=FALSE</code>; <code>"https://files.isric.org/soilgrids/latest/data/"</code> when
<code>grid=TRUE</code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments passed to <code><a href="https://rspatial.github.io/terra/reference/writeRaster.html" class="external-link">terra::writeRaster()</a></code> when
<code>grid=TRUE</code>.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>Print messages? Default: <code>FALSE</code></p></dd>


<dt id="arg-progress">progress<a class="anchor" aria-label="anchor" href="#arg-progress"></a></dt>
<dd><p>logical, give progress when iterating over multiple requests;
Default: <code>FALSE</code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <em>SoilProfileCollection</em> (or <em>SpatRaster</em> when <code>grid=TRUE</code>). Returns
<code>try-error</code> if all requests fail. Any error messages resulting from parsing
will be echoed when <code>verbose=TRUE</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>

<div class="section">
<h3 id="properties">Properties<a class="anchor" aria-label="anchor" href="#properties"></a></h3>
<table class="table table"><tr><td>Name</td><td>Description</td><td>Mapped units</td><td>Conversion factor</td><td>Conventional units</td></tr><tr><td>bdod</td><td>Bulk density of the fine earth fraction</td><td>cg/cm^3</td><td>100</td><td>kg/dm^3</td></tr><tr><td>cec</td><td>Cation Exchange Capacity of the soil</td><td>mmol(c)/kg</td><td>10</td><td>cmol(c)/kg</td></tr><tr><td>cfvo</td><td>Volumetric fraction of coarse fragments (&gt; 2 mm)</td><td>cm^3/dm^3 (vol per mil)</td><td>10</td><td>cm^3/100cm^3 (vol%)</td></tr><tr><td>clay</td><td>Proportion of clay particles (&lt; 0.002 mm) in the fine earth fraction</td><td>g/kg</td><td>10</td><td>g/100g (%)</td></tr><tr><td>nitrogen</td><td>Total nitrogen (N)</td><td>cg/kg</td><td>100</td><td>g/kg</td></tr><tr><td>phh2o</td><td>Soil pH</td><td>pH*10</td><td>10</td><td>pH</td></tr><tr><td>sand</td><td>Proportion of sand particles (&gt; 0.05 mm) in the fine earth fraction</td><td>g/kg</td><td>10</td><td>g/100g (%)</td></tr><tr><td>silt</td><td>Proportion of silt particles (&gt;= 0.002 mm and &lt;= 0.05 mm) in the fine earth fraction</td><td>g/kg</td><td>10</td><td>g/100g (%)</td></tr><tr><td>soc</td><td>Soil organic carbon content in the fine earth fraction</td><td>dg/kg</td><td>10</td><td>g/kg</td></tr><tr><td>ocd</td><td>Organic carbon density</td><td>hg/m^3</td><td>10</td><td>kg/m^3</td></tr><tr><td>ocs</td><td>Organic carbon stocks (0-30cm depth interval only)</td><td>t/ha</td><td>10</td><td>kg/m^2</td></tr><tr><td>wv0010</td><td>Volumetric Water Content at 10kPa</td><td>0.1 v% or 1 mm/m</td><td>10</td><td>volume (%)</td></tr><tr><td>wv0033</td><td>Volumetric Water Content at 33kPa</td><td>0.1 v% or 1 mm/m</td><td>10</td><td>volume (%)</td></tr><tr><td>wv1500</td><td>Volumetric Water Content at 1500kPa</td><td>0.1 v% or 1 mm/m</td><td>10</td><td>volume (%)</td></tr></table><p>SoilGrids predictions are made for the six standard depth intervals specified
in the GlobalSoilMap IUSS working group and its specifications. The default
depth intervals returned are (in centimeters): <code>"0-5"</code>, <code>"5-15"</code>, <code>"15-30"</code>,
<code>"30-60"</code>, <code>"60-100"</code>, <code>"100-200"</code> for the properties <code>"bdod"</code>, <code>"cec"</code>,
<code>"cfvo"</code>, <code>"clay"</code>, <code>"nitrogen"</code>, <code>"phh2o"</code>, <code>"sand"</code>, <code>"silt"</code>, <code>"soc"</code>,
<code>"ocd"</code>, <code>"wv0010"</code>, <code>"wv0033"</code>, <code>"wv1500"</code>–each with percentiles (5th,
50th, 95th), mean and uncertainty values. The summary statistic name will be
appended to the abbreviate variable name for each depth interval returned.
Soil organic carbon stocks (0-30cm) (<code>variables="ocs"</code>) are returned only for
<code>depth_intervals="0-30"</code>. The uncertainty values are the ratio between the
inter-quantile range (90% prediction interval width) and the median :
<code>(Q0.95-Q0.05)/Q0.50.</code> All values are converted from "mapped" to
"conventional" based on above table conversion factors. Point data requests
are made through <code>"properties/query"</code> endpoint of the <a href="https://www.isric.org/explore/soilgrids/faq-soilgrids" class="external-link">SoilGrids v2.0 REST API</a>. Please check
ISRIC's data policy, disclaimer and citation:
<a href="https://www.isric.org/about/data-policy" class="external-link">https://www.isric.org/about/data-policy</a>.</p>
<p>Find out more information about the SoilGrids and GlobalSoilMap products
here:</p><ul><li><p><a href="https://www.isric.org/explore/soilgrids/faq-soilgrids" class="external-link">https://www.isric.org/explore/soilgrids/faq-soilgrids</a></p></li>
<li><p><a href="https://www.isric.org/sites/default/files/GlobalSoilMap_specifications_december_2015_2.pdf" class="external-link">https://www.isric.org/sites/default/files/GlobalSoilMap_specifications_december_2015_2.pdf</a></p></li>
</ul></div>

    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>

<ul><li><p><strong>Common soil chemical and physical properties:</strong>
Poggio, L., de Sousa, L. M., Batjes, N. H., Heuvelink, G. B. M., Kempen, B.,
Ribeiro, E., and Rossiter, D.: SoilGrids 2.0: producing soil information for
the globe with quantified spatial uncertainty, SOIL, 7, 217–240, 2021. DOI:
<a href="https://doi.org/10.5194/soil-7-217-2021" class="external-link">doi:10.5194/soil-7-217-2021</a></p></li>
<li><p><strong>Soil water content at different pressure heads:</strong>
Turek, M.E.,  Poggio, L., Batjes, N. H., Armindo, R. A.,  de Jong van Lier,
Q.,  de Sousa, L.M.,  Heuvelink, G. B. M. : Global mapping of volumetric
water retention at 100, 330 and 15000 cm suction using the WoSIS database,
International Soil and Water Conservation Research, 11-2, 225-239, 2023. DOI:
<a href="https://doi.org/10.1016/j.iswcr.2022.08.001" class="external-link">doi:10.1016/j.iswcr.2022.08.001</a></p></li>
</ul></div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Andrew G. Brown</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ncss-tech.github.io/aqp/" class="external-link">aqp</a></span><span class="op">)</span></span></span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span>  <span class="va">your.points</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>                            lat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">37.9</span>, <span class="fl">38.1</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>                            lon <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">120.3</span>, <span class="op">-</span><span class="fl">121.5</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>                            stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">x</span> <span class="op">&lt;-</span> <span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span><span class="fu">fetchSoilGrids</span><span class="op">(</span><span class="va">your.points</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span> </span></span>
<span class="r-in"><span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">inherits</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">'try-error'</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>   <span class="fu">aqp</span><span class="fu">::</span><span class="fu"><a href="https://ncss-tech.github.io/aqp/reference/SoilProfileCollection-plotting-methods.html" class="external-link">plotSPC</a></span><span class="op">(</span><span class="va">x</span>, name <span class="op">=</span> <span class="cn">NA</span>, color <span class="op">=</span> <span class="st">"socQ50"</span><span class="op">)</span></span></span>
<span class="r-in"><span> </span></span>
<span class="r-in"><span>  <span class="co"># organic carbon stocks use 0-30cm interval</span></span></span>
<span class="r-in"><span>  <span class="va">y</span> <span class="op">&lt;-</span> <span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span><span class="fu">fetchSoilGrids</span><span class="op">(</span><span class="va">your.points</span><span class="op">[</span><span class="fl">1</span>, <span class="op">]</span>, </span></span>
<span class="r-in"><span>                          depth_interval <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"0-5"</span>, <span class="st">"0-30"</span>, <span class="st">"5-15"</span>, <span class="st">"15-30"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                          variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"soc"</span>, <span class="st">"bdod"</span>, <span class="st">"ocd"</span>, <span class="st">"ocs"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>                          </span></span>
<span class="r-in"><span>  <span class="co"># extract horizons from a SoilProfileCollection where horizon 2 overlaps 1, 3, and 4</span></span></span>
<span class="r-in"><span>  <span class="va">h</span> <span class="op">&lt;-</span> <span class="fu">aqp</span><span class="fu">::</span><span class="fu"><a href="https://ncss-tech.github.io/aqp/reference/horizons.html" class="external-link">horizons</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span></span></span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span>  <span class="co"># "ocs" (organic carbon stock 0-30cm interval)</span></span></span>
<span class="r-in"><span>  <span class="va">h</span><span class="op">[</span><span class="fl">2</span>, <span class="op">]</span></span></span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span>  <span class="va">h</span><span class="op">$</span><span class="va">thickness_meters</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="op">(</span><span class="va">h</span><span class="op">$</span><span class="va">hzdepb</span> <span class="op">-</span> <span class="va">h</span><span class="op">$</span><span class="va">hzdept</span><span class="op">)</span> <span class="op">/</span> <span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># estimate "ocs" from modeled organic carbon and bulk density in 0-5, 5-15, 15-30 intervals</span></span></span>
<span class="r-in"><span>  <span class="co">#  (sum the product of soc, bdod, and thickness in meters)</span></span></span>
<span class="r-in"><span>  <span class="co">#  (1 gram per cubic decimeter = 1 kilogram per cubic meter)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">h</span><span class="op">$</span><span class="va">socmean</span> <span class="op">*</span> <span class="va">h</span><span class="op">$</span><span class="va">bdodmean</span> <span class="op">*</span> <span class="va">h</span><span class="op">$</span><span class="va">thickness_meters</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span>  <span class="co"># estimate "ocs" from modeled organic carbon density in 0-5, 5-15, 15-30 intervals</span></span></span>
<span class="r-in"><span>  <span class="co">#  (sum the product of "ocd" and thickness in meters)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">h</span><span class="op">$</span><span class="va">ocdmean</span> <span class="op">*</span> <span class="va">h</span><span class="op">$</span><span class="va">thickness_meters</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span> </span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Dylan Beaudette, Jay Skovlin, Stephen Roecker, Andrew Brown.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

