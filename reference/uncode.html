<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="These functions convert the coded values returned from NASIS or SDA to
factors (e.g. 1 = Alfisols) using the metadata tables from NASIS. For SDA
the metadata is pulled from a static snapshot in the soilDB package
(/data/metadata.rda)."><title>Convert coded values returned from NASIS and SDA queries into human-readable values — uncode • soilDB</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Convert coded values returned from NASIS and SDA queries into human-readable values — uncode"><meta property="og:description" content="These functions convert the coded values returned from NASIS or SDA to
factors (e.g. 1 = Alfisols) using the metadata tables from NASIS. For SDA
the metadata is pulled from a static snapshot in the soilDB package
(/data/metadata.rda)."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">soilDB</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.7.7</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/fetchNASIS.html">fetchNASIS(from='pedons') Columns</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ncss-tech/soilDB/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Convert coded values returned from NASIS and SDA queries into human-readable values</h1>
      <small class="dont-index">Source: <a href="https://github.com/ncss-tech/soilDB/blob/HEAD/R/uncode.R" class="external-link"><code>R/uncode.R</code></a></small>
      <div class="d-none name"><code>uncode.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>These functions convert the coded values returned from NASIS or SDA to
factors (e.g. 1 = Alfisols) using the metadata tables from NASIS. For SDA
the metadata is pulled from a static snapshot in the soilDB package
(/data/metadata.rda).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">uncode</span><span class="op">(</span></span>
<span>  <span class="va">df</span>,</span>
<span>  invert <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  db <span class="op">=</span> <span class="st">"NASIS"</span>,</span>
<span>  droplevels <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  stringsAsFactors <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dsn <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">code</span><span class="op">(</span><span class="va">df</span>, db <span class="op">=</span> <span class="cn">NULL</span>, droplevels <span class="op">=</span> <span class="cn">FALSE</span>, stringsAsFactors <span class="op">=</span> <span class="cn">NULL</span>, dsn <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>df</dt>
<dd><p>data.frame</p></dd>


<dt>invert</dt>
<dd><p>converts the code labels back to their coded values (<code>FALSE</code>)</p></dd>


<dt>db</dt>
<dd><p>label specifying the soil database the data is coming from, which
indicates whether or not to query metadata from local NASIS database
("NASIS") or use soilDB-local snapshot ("LIMS" or "SDA")</p></dd>


<dt>droplevels</dt>
<dd><p>logical: indicating whether to drop unused levels in
classifying factors. This is useful when a class has large number of unused
classes, which can waste space in tables and figures.</p></dd>


<dt>stringsAsFactors</dt>
<dd><p>deprecated</p></dd>


<dt>dsn</dt>
<dd><p>Optional: path to local SQLite database containing NASIS
table structure; default: <code>NULL</code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A <code>data.frame</code> with the results.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>These functions convert the coded values returned from NASIS into their
plain text representation. It duplicates the functionality of the CODELABEL
function found in NASIS. This function is primarily intended to be used
internally by other soilDB R functions, in order to minimize the need to
manually convert values.</p>
<p>The function works by iterating through the column names in a data frame and
looking up whether they match any of the ColumnPhysicalNames found in the
metadata domain tables. If matches are found then the columns coded values
are converted to their corresponding factor levels. Therefore it is not
advisable to reuse column names from NASIS unless the contents match the
range of values and format found in NASIS. Otherwise uncode() will convert
their values to NA.</p>
<p>When data is being imported from NASIS, the metadata tables are sourced
directly from NASIS. When data is being imported from SDA or the NASIS Web
Reports, the metadata is pulled from a static snapshot in the soilDB
package.</p>
<p>Set <code>options(soilDB.NASIS.skip_uncode = TRUE)</code> to bypass decoding logic; for instance when using soilDB NASIS functions with custom NASIS snapshots that have already been decoded.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Stephen Roecker</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># convert column name `fraghard` (fragment hardness) codes to labels</span></span></span>
<span class="r-in"><span><span class="fu">uncode</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>fraghard <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               fraghard</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1          noncemented</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2            indurated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  moderately cemented</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    strongly cemented</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      weakly cemented</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     extremely weakly</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7          very weakly</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8        very strongly</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9               weakly</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10          moderately</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># convert column name `fragshp` (fragment shape) labels to codes</span></span></span>
<span class="r-in"><span><span class="fu">code</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>fragshp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"flat"</span>, <span class="st">"nonflat"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   fragshp</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2       2</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Dylan Beaudette, Jay Skovlin, Stephen Roecker, Andrew Brown.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

