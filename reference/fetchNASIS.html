<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Get a pedon or component data SoilProfileCollection from NASIS — fetchNASIS • soilDB</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Get a pedon or component data SoilProfileCollection from NASIS — fetchNASIS"><meta name="description" content="Fetch commonly used site/pedon/horizon or mapunit component data
from NASIS, returned as a SoilProfileCollection object.
This function imports data from NASIS into R as a SoilProfileCollection
object. It &quot;flattens&quot; NASIS pedon and component tables, including their
child tables, into several more manageable data frames. Primarily these
functions access the local NASIS database using an ODBC connection. The
dsn argument allows you to specify a path or DBIConnection to an SQLite
database. The argument from = &quot;pedon_report&quot;, data can be read from the
NASIS Report 'fetchNASIS', from either text file or URL (specified as
url). The primary purpose of fetchNASIS(from = &quot;pedon_report&quot;) is
importing datasets larger than 8000+ pedons/components.
Tutorials:
fetchNASIS Columns
fetchNASIS Pedons Tutorial
fetchNASIS Components Tutorial

"><meta property="og:description" content="Fetch commonly used site/pedon/horizon or mapunit component data
from NASIS, returned as a SoilProfileCollection object.
This function imports data from NASIS into R as a SoilProfileCollection
object. It &quot;flattens&quot; NASIS pedon and component tables, including their
child tables, into several more manageable data frames. Primarily these
functions access the local NASIS database using an ODBC connection. The
dsn argument allows you to specify a path or DBIConnection to an SQLite
database. The argument from = &quot;pedon_report&quot;, data can be read from the
NASIS Report 'fetchNASIS', from either text file or URL (specified as
url). The primary purpose of fetchNASIS(from = &quot;pedon_report&quot;) is
importing datasets larger than 8000+ pedons/components.
Tutorials:
fetchNASIS Columns
fetchNASIS Pedons Tutorial
fetchNASIS Components Tutorial

"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">soilDB</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.8.14</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/dominant-es.html">Mapping Dominant Ecological Sites using SSURGO Data</a></li>
    <li><a class="dropdown-item" href="../articles/fetchNASIS.html">fetchNASIS(from='pedons') Columns</a></li>
    <li><a class="dropdown-item" href="../articles/local-ssurgo.html">Local Soil Survey Geographic (SSURGO) Databases</a></li>
    <li><a class="dropdown-item" href="../articles/wcs-ssurgo.html">Map Unit Key Grids and Thematic Maps of Soil Survey Geographic (SSURGO) Data</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ncss-tech/soilDB/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Get a pedon or component data <code>SoilProfileCollection</code> from NASIS</h1>
      <small class="dont-index">Source: <a href="https://github.com/ncss-tech/soilDB/blob/master/R/fetchNASIS.R" class="external-link"><code>R/fetchNASIS.R</code></a>, <a href="https://github.com/ncss-tech/soilDB/blob/master/R/get_concentrations_from_NASIS_db.R" class="external-link"><code>R/get_concentrations_from_NASIS_db.R</code></a>, <a href="https://github.com/ncss-tech/soilDB/blob/master/R/get_phfmp_from_NASIS_db.R" class="external-link"><code>R/get_phfmp_from_NASIS_db.R</code></a></small>
      <div class="d-none name"><code>fetchNASIS.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Fetch commonly used site/pedon/horizon or mapunit component data
from NASIS, returned as a <code>SoilProfileCollection</code> object.</p>
<p>This function imports data from NASIS into R as a <code>SoilProfileCollection</code>
object. It "flattens" NASIS pedon and component tables, including their
child tables, into several more manageable data frames. Primarily these
functions access the local NASIS database using an ODBC connection. The
<code>dsn</code> argument allows you to specify a path or <code>DBIConnection</code> to an SQLite
database. The argument <code>from = "pedon_report"</code>, data can be read from the
NASIS Report 'fetchNASIS', from either text file or URL (specified as
<code>url</code>). The primary purpose of <code>fetchNASIS(from = "pedon_report")</code> is
importing datasets larger than 8000+ pedons/components.</p>
<p>Tutorials:</p><ul><li><p><a href="http://ncss-tech.github.io/soilDB/articles/fetchNASIS.html">fetchNASIS Columns</a></p></li>
<li><p><a href="http://ncss-tech.github.io/AQP/soilDB/fetchNASIS-mini-tutorial.html" class="external-link">fetchNASIS Pedons Tutorial</a></p></li>
<li><p><a href="http://ncss-tech.github.io/AQP/soilDB/NASIS-component-data.html" class="external-link">fetchNASIS Components Tutorial</a></p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">fetchNASIS</span><span class="op">(</span></span>
<span>  from <span class="op">=</span> <span class="st">"pedons"</span>,</span>
<span>  url <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  SS <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  rmHzErrors <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  nullFragsAreZero <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  soilColorState <span class="op">=</span> <span class="st">"moist"</span>,</span>
<span>  mixColors <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  lab <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  fill <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  dropAdditional <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  dropNonRepresentative <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  duplicates <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  stringsAsFactors <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dsn <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">get_concentrations_from_NASIS_db</span><span class="op">(</span></span>
<span>  SS <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  stringsAsFactors <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dsn <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">get_phfmp_from_NASIS_db</span><span class="op">(</span>SS <span class="op">=</span> <span class="cn">TRUE</span>, stringsAsFactors <span class="op">=</span> <span class="cn">NULL</span>, dsn <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-from">from<a class="anchor" aria-label="anchor" href="#arg-from"></a></dt>
<dd><p>Determines what objects should fetched? Default: <code>'pedons'</code>.
Alternately, <code>'components'</code>, or <code>'pedon_report'</code>.</p></dd>


<dt id="arg-url">url<a class="anchor" aria-label="anchor" href="#arg-url"></a></dt>
<dd><p>String specifying the url for the NASIS pedon_report (default:
<code>NULL</code>)</p></dd>


<dt id="arg-ss">SS<a class="anchor" aria-label="anchor" href="#arg-ss"></a></dt>
<dd><p>Fetch data from the currently loaded selected set in NASIS or from
the entire Local database (default: <code>TRUE</code>)</p></dd>


<dt id="arg-rmhzerrors">rmHzErrors<a class="anchor" aria-label="anchor" href="#arg-rmhzerrors"></a></dt>
<dd><p>Should pedons with horizon depth errors be removed from the
results? (default: <code>FALSE</code>)</p></dd>


<dt id="arg-nullfragsarezero">nullFragsAreZero<a class="anchor" aria-label="anchor" href="#arg-nullfragsarezero"></a></dt>
<dd><p>Should fragment volumes of <code>NULL</code> be interpreted as
<code>0</code>? (default: <code>TRUE</code>), see details</p></dd>


<dt id="arg-soilcolorstate">soilColorState<a class="anchor" aria-label="anchor" href="#arg-soilcolorstate"></a></dt>
<dd><p>Used only for <code>from = 'pedons'</code>; which colors should be
used to generate the convenience field <code>soil_color</code>? (<code>'moist'</code> or <code>'dry'</code>)</p></dd>


<dt id="arg-mixcolors">mixColors<a class="anchor" aria-label="anchor" href="#arg-mixcolors"></a></dt>
<dd><p>Should mixed colors be calculated where multiple colors are
populated for the same moisture state in a horizon? Default <code>FALSE</code> takes
the dominant color for each horizon moist/dry state.</p></dd>


<dt id="arg-lab">lab<a class="anchor" aria-label="anchor" href="#arg-lab"></a></dt>
<dd><p>Should the <code>phlabresults</code> child table be fetched with
site/pedon/horizon data (default: <code>FALSE</code>)</p></dd>


<dt id="arg-fill">fill<a class="anchor" aria-label="anchor" href="#arg-fill"></a></dt>
<dd><p>Include pedon or component records without horizon data in
result? (default: <code>FALSE</code>)</p></dd>


<dt id="arg-dropadditional">dropAdditional<a class="anchor" aria-label="anchor" href="#arg-dropadditional"></a></dt>
<dd><p>Used only for <code>from='components'</code> with <code>duplicates = TRUE</code>. Prevent "duplication" of <code>mustatus == "additional"</code>  mapunits?
Default: <code>TRUE</code></p></dd>


<dt id="arg-dropnonrepresentative">dropNonRepresentative<a class="anchor" aria-label="anchor" href="#arg-dropnonrepresentative"></a></dt>
<dd><p>Used only for <code>from='components'</code> with
<code>duplicates = TRUE</code>. Prevent "duplication" of non-representative data
mapunits? Default: <code>TRUE</code></p></dd>


<dt id="arg-duplicates">duplicates<a class="anchor" aria-label="anchor" href="#arg-duplicates"></a></dt>
<dd><p>Used only for <code>from='components'</code>. Duplicate components for
all instances of use (i.e. one for each legend data mapunit is used on;
optionally for additional mapunits, and/or non-representative data
mapunits?). This will include columns from
<code><a href="get_component_data_from_NASIS_db.html">get_component_correlation_data_from_NASIS_db()</a></code> that identify which
legend(s) a component is used on.</p></dd>


<dt id="arg-stringsasfactors">stringsAsFactors<a class="anchor" aria-label="anchor" href="#arg-stringsasfactors"></a></dt>
<dd><p>deprecated</p></dd>


<dt id="arg-dsn">dsn<a class="anchor" aria-label="anchor" href="#arg-dsn"></a></dt>
<dd><p>Optional: path or <em>DBIConnection</em> to
<a href="NASISLocalDatabase.html">local database containing NASIS table
structure</a>; default: <code>NULL</code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>SoilProfileCollection</code> object</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The value of <code>nullFragsAreZero</code> will have a significant impact on the rock
fragment fractions returned by fetchNASIS. Set <code>nullFragsAreZero = FALSE</code>
in those cases where there are many data-gaps and NULL rock fragment values
should be interpreted as NULL. Set <code>nullFragsAreZero = TRUE</code> in those
cases where NULL rock fragment values should be interpreted as 0.</p>
<p>This function attempts to do most of the boilerplate work when extracting
site/pedon/horizon or component data from a local NASIS database. Pedon IDs
that are missing horizon data, or have errors in their horizonation are
printed on the console. Pedons with combination horizons (e.g. B/C) are
erroneously marked as errors due to the way in which they are stored in
NASIS as two overlapping horizon records.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code>get_component_data_from_NASIS()</code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>D. E. Beaudette, J. M. Skovlin, S.M. Roecker, A.G. Brown</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Dylan Beaudette, Jay Skovlin, Stephen Roecker, Andrew Brown.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

